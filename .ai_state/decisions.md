# DECISIONS

## ADR-001 初始化范围

- 日期: 2026-02-06
- 决策: 仅实现 `Phase1 骨架`
- 原因: 先构建稳健基础设施，避免过早进入复杂业务开发。

## ADR-002 UI 还原策略

- 日期: 2026-02-06
- 决策: 采用 `结构先行`
- 原因: 优先确保信息架构与可导航性。

## ADR-003 平台配置策略

- 日期: 2026-02-06
- 决策: `双平台预配`
- 原因: 缩短后续出包准备时间。

## ADR-004 版本策略

- 日期: 2026-02-06
- 决策: `文档版本优先`
- 原因: 与需求和架构文档保持一致，降低偏差。

## ADR-005 脚手架策略

- 日期: 2026-02-06
- 决策: `Bun + Vite` + `cargo tauri init`
- 原因: 规避当前 `bunx tauri` 链路失败风险。

## ADR-006 配置入口重构

- 日期: 2026-02-06
- 决策: 移除首次引导入口，拆分为 `孩子信息` 独立页 + `模型维护` 独立页。
- 原因: 将一次性引导改为可持续维护，降低后续配置修改成本。

## ADR-007 多孩子与模型列表交互

- 日期: 2026-02-06
- 决策: 孩子信息改为多档案维护，并增加能力评估占位模块；模型页简化为左厂商右模型清单与启停开关。
- 原因: 贴合家长多孩场景与精简模型管理路径，减少配置噪音。

## ADR-008 标签化多孩子与模型 CRUD

- 日期: 2026-02-06
- 决策: 多孩子入口改为标签页；模型管理改为厂商-模型双栏，并支持模型增删改查、类型与温度配置。
- 原因: 节省空间并提升模型维护效率，满足精细化管理诉求。

## ADR-009 C 端视觉与厂商协议预留

- 日期: 2026-02-06
- 决策: 全局样式升级为轻强调色设计；模型厂商新增协议/鉴权/路径预留字段，支持不同接口协议演进。
- 原因: 面向 C 端展示品质与后续多协议兼容能力，避免后续重构成本。

## ADR-010 配置持久化与协议适配收敛

- 日期: 2026-02-06
- 决策: 模型/孩子配置采用 `SQLite(settings)` 持久化，并提供 `localStorage` 回退；LLM 请求层引入按 `protocol/authScheme` 组包与响应解析适配。
- 原因: 保证桌面端稳定落库，同时兼容纯前端预览；为后续接入真实多厂商协议打好统一入口。

## ADR-011 对话作业一体化与命名收敛

- 日期: 2026-02-06
- 决策: 对话默认空态，首条消息自动创建会话；会话可删除但记忆归档持久化；对话生成作业与“家庭作业”页面共用同一数据池；导航命名收敛为“学习资料/家庭作业/学习档案”，设置入口先隐藏。
- 原因: 降低用户认知负担，确保对话与任务不是两套割裂系统，符合家长使用路径。

## ADR-012 档案评估与作业执行深化

- 日期: 2026-02-06
- 决策: 学习档案将主观能力画像（对话 + AI 判断 + 侧重点）与客观评分（考试/自测记录）合并为统一评估；家庭作业支持多题型在线作答与导出 PDF；对话上传可按作业名自动匹配并标注完成。
- 原因: 将“评价—布置—提交—完成”连成闭环，提升家长与孩子的实际使用价值。

## ADR-013 对话纯自然语言入口与档案可视化升级

- 日期: 2026-02-06
- 决策: bot 页取消前置绑定控件，恢复为纯自然语言引导；学习档案改为学科分数输入框全量展示，历史成绩可折叠，综合评估新增主客观平均折线图。
- 原因: 降低操作门槛，保留结构化结果，同时让评估信息更直观可读。

## ADR-014 交互补强（折线图悬浮 + 指令面板回归）

- 日期: 2026-02-07
- 决策: 学习档案折线图支持点位悬浮显示学科/日期/主客观/平均分详情；bot 输入框恢复 `/` Agent 与 `@` 学习资料文件联想面板，支持模糊搜索与点击回填。
- 原因: 在保持自然语言主流程不变前提下，补齐高频辅助交互，降低输入成本并提升评估可读性。

## ADR-015 作业页去生成化 + 档案录入再精简

- 日期: 2026-02-07
- 决策: 家庭作业页移除手动/自动生成入口，仅保留作业列表、详情与下载；学习档案左侧仅保留姓名、年级、家长备注、考试成绩录入与历史成绩（默认折叠），右侧集中呈现 AI 评估、历史评价成绩与学习侧重点建议。
- 原因: 统一作业创建入口到 bot 自然语言对话，降低双入口心智成本；档案页聚焦高价值输入并强化结果展示。

## ADR-016 bot 选择项悬浮展示

- 日期: 2026-02-07
- 决策: bot 页 `/` 选择的 Agent 与 `@` 选择的学习资料文件不回填输入框文本，改为悬浮标签显示在输入区上方，并支持单独移除。
- 原因: 提升对话输入可读性，避免输入框被结构化指令污染，同时保留可见上下文。

## ADR-017 bot 联想键盘交互

- 日期: 2026-02-07
- 决策: bot 联想面板支持 `ArrowUp`/`ArrowDown` 在候选项间切换高亮，`Enter` 确认当前高亮项。
- 原因: 提升键盘操作效率，减少鼠标依赖，符合高频输入场景。

## ADR-018 全站视觉提质（统一样式令牌）

- 日期: 2026-02-07
- 决策: 在不改业务逻辑前提下，统一全站视觉令牌并强化卡片层次、按钮动效、输入焦点态、聊天气泡与信息标签样式，形成更精致一致的 C 端视觉体验。
- 原因: 以低风险样式改造快速提升整体观感与品质一致性。
